{"ast":null,"code":"import React,{Component}from\"react\";import NavBar from\"./NavBar\";import axios from\"axios\";import{SERVER_HOST}from\"../config/global_constants\";import{Link,Redirect}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class UserProfile extends Component{constructor(props){super(props);this.handleReturn=()=>{this.setState({redirectToDashboard:true});};this.state={user:{},address:{address_line_1:\"\",address_line_2:\"\",address_line_3:\"\",city:\"\",county:\"\",country:\"\",post_code:\"\"},redirectToDashboard:false,hasAddress:false};}componentDidMount(){// get user email\nconst email=this.props.match.params.email;// get the user with the matching id from database collection\naxios.get(\"\".concat(SERVER_HOST,\"/AddAddress/users/\").concat(email),{headers:{\"authorization\":localStorage.token}}).then(res=>{// console.log(\"User found and displaying in UserProfile\")\nthis.setState({user:res.data});if(!res.data.address.address_line_1){// check if the user has an address saved already\nthis.setState({hasAddress:false});}else{this.setState({hasAddress:true});this.setState({address:res.data.address});// console.log(\"address from response: \", this.state.address)\n}}).catch(err=>{});}render(){console.log(\"hasAddress: \",this.state.hasAddress);console.log(\"Address: \",this.state.user.address);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-view\",children:[this.state.redirectToDashboard?/*#__PURE__*/_jsx(Redirect,{to:\"/AdminDashboard/ViewUsers/\"}):null,/*#__PURE__*/_jsx(\"div\",{className:\"admin-head-container\",children:/*#__PURE__*/_jsx(NavBar,{})}),/*#__PURE__*/_jsx(\"h1\",{children:\"User Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-photo\",children:localStorage.profilePhoto!==\"null\"?/*#__PURE__*/_jsx(\"img\",{id:\"profilePhoto\",src:\"data:;base64,\".concat(localStorage.profilePhoto),alt:\"Your profile picture\"}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Details\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Name: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.name})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Email: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.email})]})]}),this.state.hasAddress?/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Address\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Line 1: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.address_line_1})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Line 2: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.address_line_2})]}),this.state.user.address.address_line_3?/*#__PURE__*/_jsxs(\"h4\",{children:[\"Line 3: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.address_line_3})]}):null,/*#__PURE__*/_jsxs(\"h4\",{children:[\"City: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.city})]}),this.state.user.address.county?/*#__PURE__*/_jsxs(\"h4\",{children:[\"County: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.county})]}):null,/*#__PURE__*/_jsxs(\"h4\",{children:[\"Country: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.country})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Post Code: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.post_code})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{className:\"testing-green-button\",to:\"/AddAddress/\".concat(localStorage.email,\"/\"),children:\"Update\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Want to store your address for a faster checkout?\"}),/*#__PURE__*/_jsx(Link,{className:\"testing-green-button\",to:\"/AddAddress\",children:\"Add Address\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleReturn,children:\"Return\"})]})})]});}}","map":{"version":3,"names":["React","Component","NavBar","axios","SERVER_HOST","Link","Redirect","jsx","_jsx","jsxs","_jsxs","UserProfile","constructor","props","handleReturn","setState","redirectToDashboard","state","user","address","address_line_1","address_line_2","address_line_3","city","county","country","post_code","hasAddress","componentDidMount","email","match","params","get","concat","headers","localStorage","token","then","res","data","catch","err","render","console","log","className","children","to","profilePhoto","id","src","alt","name","onClick"],"sources":["C:/Users/jamie/Desktop/CA2/NODEJS-ONLY/client/src/components/UserProfile.js"],"sourcesContent":["import React, {Component} from \"react\"\r\nimport NavBar from \"./NavBar\";\r\nimport axios from \"axios\";\r\nimport {SERVER_HOST} from \"../config/global_constants\";\r\nimport {Link, Redirect} from \"react-router-dom\";\r\n\r\n\r\nexport default class UserProfile extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: {},\r\n            address: {\r\n                address_line_1: \"\",\r\n                address_line_2: \"\",\r\n                address_line_3: \"\",\r\n                city: \"\",\r\n                county: \"\",\r\n                country: \"\",\r\n                post_code: \"\"\r\n            },\r\n            redirectToDashboard: false,\r\n            hasAddress: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        // get user email\r\n        const email = this.props.match.params.email\r\n\r\n\r\n        // get the user with the matching id from database collection\r\n        axios.get(`${SERVER_HOST}/AddAddress/users/${email}`, {headers: {\"authorization\": localStorage.token}})\r\n            .then(res => {\r\n\r\n                        // console.log(\"User found and displaying in UserProfile\")\r\n                        this.setState({user: res.data})\r\n                        if(!res.data.address.address_line_1) { // check if the user has an address saved already\r\n                            this.setState({hasAddress: false})\r\n\r\n                        } else {\r\n                            this.setState({hasAddress: true})\r\n                            this.setState({address: res.data.address})\r\n                            // console.log(\"address from response: \", this.state.address)\r\n                        }\r\n            })\r\n            .catch(err=>{\r\n\r\n            })\r\n    }\r\n\r\n    handleReturn = () => {\r\n        this.setState({redirectToDashboard: true})\r\n    }\r\n\r\n    render() {\r\n        console.log(\"hasAddress: \",this.state.hasAddress)\r\n        console.log(\"Address: \",this.state.user.address)\r\n        return (\r\n            <div className=\"profile-view\">\r\n                {this.state.redirectToDashboard ? <Redirect to={\"/AdminDashboard/ViewUsers/\"}/> : null}\r\n                <div className=\"admin-head-container\">\r\n                    <NavBar/>\r\n                </div>\r\n\r\n                <h1>User Profile</h1>\r\n\r\n                <div className=\"user-profile\">\r\n\r\n                    <div className=\"profile-container\">\r\n                        <div className=\"profile-photo\">\r\n                            {localStorage.profilePhoto !== \"null\" ?\r\n                                <img id=\"profilePhoto\" src={`data:;base64,${localStorage.profilePhoto}`}\r\n                                     alt=\"Your profile picture\"/> : null}\r\n                        </div>\r\n\r\n                        <div className=\"profile-details\">\r\n                            <div className=\"left\">\r\n                                <h3>Your Details</h3>\r\n                                <h4>Name: <span>{this.state.user.name}</span></h4>\r\n                                <h4>Email: <span>{this.state.user.email}</span></h4>\r\n\r\n                            </div>\r\n                            {this.state.hasAddress?\r\n                                <div className=\"right\">\r\n                                    <h3>Your Address</h3>\r\n                                    <h4>Line 1: <span>{this.state.user.address.address_line_1}</span></h4>\r\n                                    <h4>Line 2: <span>{this.state.user.address.address_line_2}</span></h4>\r\n                                    {this.state.user.address.address_line_3 ? <h4>Line 3: <span>{this.state.user.address.address_line_3}</span></h4> : null}\r\n                                    <h4>City: <span>{this.state.user.address.city}</span></h4>\r\n                                    {this.state.user.address.county ? <h4>County: <span>{this.state.user.address.county}</span></h4> : null}\r\n                                    <h4>Country: <span>{this.state.user.address.country}</span></h4>\r\n                                    <h4>Post Code: <span>{this.state.user.address.post_code}</span></h4>\r\n                                    <br/>\r\n                                    <Link className=\"testing-green-button\" to={`/AddAddress/${localStorage.email}/`}>Update</Link>\r\n                                </div>\r\n\r\n                                :\r\n                                <div className=\"right\">\r\n                                    <h3>Want to store your address for a faster checkout?</h3>\r\n                                    <Link className=\"testing-green-button\" to={\"/AddAddress\"}>Add Address</Link>\r\n                                </div>\r\n                            }\r\n\r\n                        </div>\r\n                        <button onClick={this.handleReturn}>Return</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}