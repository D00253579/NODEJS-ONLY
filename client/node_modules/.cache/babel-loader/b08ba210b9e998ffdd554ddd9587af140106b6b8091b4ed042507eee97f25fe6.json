{"ast":null,"code":"var _jsxFileName = \"/Users/lukehilliard/Desktop/Full Stack CA2/NODEJS-ONLY/client/src/components/BuyProduct.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport PaymentMessage from \"./PaymentMessage\";\nimport { SANDBOX_CLIENT_ID, SERVER_HOST } from \"../config/global_constants\";\nimport { PayPalButtons, PayPalScriptProvider } from \"@paypal/react-paypal-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class BuyProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.createOrder = (data, actions) => {\n      return actions.order.create({\n        purchase_units: [{\n          amount: {\n            value: this.props.price\n          }\n        }]\n      });\n    };\n    this.onApprove = paymentData => {\n      axios.post(`${SERVER_HOST}/sales/${paymentData.orderID}/${this.props.carID}/${this.props.price}`, {\n        headers: {\n          \"authorization\": localStorage.token,\n          \"Content-type\": \"multipart/form-data\"\n        }\n      }).then(res => {\n        this.setState({\n          payPalMessageType: PaymentMessage.messageType.SUCCESS,\n          payPalOrderID: paymentData.orderID,\n          redirectToPayPalMessage: true\n        });\n      }).catch(errorData => {\n        this.setState({\n          payPalMessageType: PaymentMessage.messageType.ERROR,\n          redirectToPayPalMessage: true\n        });\n      });\n    };\n    this.onError = errorData => {\n      this.setState({\n        payPalMessageType: PaymentMessage.messageType.ERROR,\n        redirectToPayPalMessage: true\n      });\n    };\n    this.onCancel = cancelData => {\n      // The user pressed the Paypal checkout popup window cancel button or closed the Paypal checkout popup window\n      this.setState({\n        payPalMessageType: PaymentMessage.messageType.CANCEL,\n        redirectToPayPalMessage: true\n      });\n    };\n    this.state = {\n      redirectToPayPalMessage: false\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.redirectToPayPalMessage ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: `/PayPalMessage/${this.state.payPalMessageType}/${this.state.payPalOrderID}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 55\n      }, this) : null, /*#__PURE__*/_jsxDEV(PayPalScriptProvider, {\n        options: {\n          currency: \"EUR\",\n          \"client-id\": SANDBOX_CLIENT_ID\n        },\n        children: /*#__PURE__*/_jsxDEV(PayPalButtons, {\n          style: {\n            layout: \"horizontal\"\n          },\n          createOrder: this.createOrder,\n          onApprove: this.onApprove,\n          onError: this.onError,\n          onCancel: this.onCancel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","axios","Redirect","PaymentMessage","SANDBOX_CLIENT_ID","SERVER_HOST","PayPalButtons","PayPalScriptProvider","jsxDEV","_jsxDEV","BuyProduct","constructor","props","createOrder","data","actions","order","create","purchase_units","amount","value","price","onApprove","paymentData","post","orderID","carID","headers","localStorage","token","then","res","setState","payPalMessageType","messageType","SUCCESS","payPalOrderID","redirectToPayPalMessage","catch","errorData","ERROR","onError","onCancel","cancelData","CANCEL","state","render","children","to","fileName","_jsxFileName","lineNumber","columnNumber","options","currency","style","layout"],"sources":["/Users/lukehilliard/Desktop/Full Stack CA2/NODEJS-ONLY/client/src/components/BuyProduct.js"],"sourcesContent":["import React, {Component} from \"react\"\nimport axios from \"axios\"\nimport {Redirect} from \"react-router-dom\"\nimport PaymentMessage from \"./PaymentMessage\";\nimport {SANDBOX_CLIENT_ID, SERVER_HOST} from \"../config/global_constants\"\nimport {PayPalButtons, PayPalScriptProvider} from \"@paypal/react-paypal-js\"\n\nexport default class BuyProduct extends Component\n{\nconstructor(props) {\n    super(props);\n    this.state={\nredirectToPayPalMessage:false\n\n    }\n}\n    createOrder = (data, actions) =>\n    {\n        return actions.order.create({purchase_units:[{amount:{value:this.props.price}}]})\n    }\n\n\n    onApprove = paymentData =>\n    {\n        axios.post(`${SERVER_HOST}/sales/${paymentData.orderID}/${this.props.carID}/${this.props.price}`, {headers:{\"authorization\":localStorage.token, \"Content-type\": \"multipart/form-data\"}})\n            .then(res =>\n            {\n                this.setState({payPalMessageType:PaymentMessage.messageType.SUCCESS,\n                    payPalOrderID:paymentData.orderID,\n                    redirectToPayPalMessage:true})\n            })\n            .catch(errorData =>\n            {\n                this.setState({payPalMessageType:PaymentMessage.messageType.ERROR,\n                    redirectToPayPalMessage:true})\n            })\n    }\n\n\n    onError = errorData =>\n    {\n        this.setState({payPalMessageType:PaymentMessage.messageType.ERROR,\n            redirectToPayPalMessage:true})\n    }\n\n\n    onCancel = cancelData =>\n    {\n        // The user pressed the Paypal checkout popup window cancel button or closed the Paypal checkout popup window\n        this.setState({payPalMessageType:PaymentMessage.messageType.CANCEL,\n            redirectToPayPalMessage:true})\n    }\n\n\n    render()\n    {\n        return (\n            <div>\n                {this.state.redirectToPayPalMessage ? <Redirect to= {`/PayPalMessage/${this.state.payPalMessageType}/${this.state.payPalOrderID}`}/> : null}\n\n                <PayPalScriptProvider options={{currency:\"EUR\", \"client-id\":SANDBOX_CLIENT_ID }}>\n                    <PayPalButtons style={{layout: \"horizontal\"}} createOrder={this.createOrder} onApprove={this.onApprove} onError={this.onError} onCancel={this.onCancel}/>\n                </PayPalScriptProvider>\n            </div>\n        )}\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}