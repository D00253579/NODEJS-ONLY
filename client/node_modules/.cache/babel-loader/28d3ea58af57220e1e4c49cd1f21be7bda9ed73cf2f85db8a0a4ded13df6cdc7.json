{"ast":null,"code":"import React,{Component}from\"react\";import axios from\"axios\";import{Redirect}from\"react-router-dom\";import PaymentMessage from\"./PaymentMessage\";import{SANDBOX_CLIENT_ID,SERVER_HOST}from\"../config/global_constants\";import{PayPalButtons,PayPalScriptProvider}from\"@paypal/react-paypal-js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class BuyProduct extends Component{constructor(props){super(props);this.createOrder=(data,actions)=>{return actions.order.create({purchase_units:[{amount:{value:this.props.price}}]});};this.onApprove=paymentData=>{axios.post(\"\".concat(SERVER_HOST,\"/sales/\").concat(paymentData.orderID,\"/\").concat(this.props.carID,\"/\").concat(this.props.price),{headers:{\"authorization\":localStorage.token,\"Content-type\":\"multipart/form-data\"}}).then(res=>{this.setState({payPalMessageType:PaymentMessage.messageType.SUCCESS,payPalOrderID:paymentData.orderID,redirectToPayPalMessage:true});}).catch(errorData=>{this.setState({payPalMessageType:PaymentMessage.messageType.ERROR,redirectToPayPalMessage:true});});};this.onError=errorData=>{this.setState({payPalMessageType:PaymentMessage.messageType.ERROR,redirectToPayPalMessage:true});};this.onCancel=cancelData=>{// The user pressed the Paypal checkout popup window cancel button or closed the Paypal checkout popup window\nthis.setState({payPalMessageType:PaymentMessage.messageType.CANCEL,redirectToPayPalMessage:true});};this.state={redirectToPayPalMessage:false};}render(){return/*#__PURE__*/_jsxs(\"div\",{children:[this.state.redirectToPayPalMessage?/*#__PURE__*/_jsx(Redirect,{to:\"/PayPalMessage/\".concat(this.state.payPalMessageType,\"/\").concat(this.state.payPalOrderID)}):null,/*#__PURE__*/_jsx(PayPalScriptProvider,{options:{currency:\"EUR\",\"client-id\":SANDBOX_CLIENT_ID},children:/*#__PURE__*/_jsx(PayPalButtons,{style:{layout:\"horizontal\"},createOrder:this.createOrder,onApprove:this.onApprove,onError:this.onError,onCancel:this.onCancel})})]});}}","map":{"version":3,"names":["React","Component","axios","Redirect","PaymentMessage","SANDBOX_CLIENT_ID","SERVER_HOST","PayPalButtons","PayPalScriptProvider","jsx","_jsx","jsxs","_jsxs","BuyProduct","constructor","props","createOrder","data","actions","order","create","purchase_units","amount","value","price","onApprove","paymentData","post","concat","orderID","carID","headers","localStorage","token","then","res","setState","payPalMessageType","messageType","SUCCESS","payPalOrderID","redirectToPayPalMessage","catch","errorData","ERROR","onError","onCancel","cancelData","CANCEL","state","render","children","to","options","currency","style","layout"],"sources":["C:/Users/jamie/Desktop/CA2/NODEJS-ONLY/client/src/components/BuyProduct.js"],"sourcesContent":["import React, {Component} from \"react\"\r\nimport axios from \"axios\"\r\nimport {Redirect} from \"react-router-dom\"\r\nimport PaymentMessage from \"./PaymentMessage\";\r\nimport {SANDBOX_CLIENT_ID, SERVER_HOST} from \"../config/global_constants\"\r\nimport {PayPalButtons, PayPalScriptProvider} from \"@paypal/react-paypal-js\"\r\n\r\nexport default class BuyProduct extends Component\r\n{\r\nconstructor(props) {\r\n    super(props);\r\n    this.state={\r\nredirectToPayPalMessage:false\r\n\r\n    }\r\n}\r\n    createOrder = (data, actions) =>\r\n    {\r\n        return actions.order.create({purchase_units:[{amount:{value:this.props.price}}]})\r\n    }\r\n\r\n\r\n    onApprove = paymentData =>\r\n    {\r\n        axios.post(`${SERVER_HOST}/sales/${paymentData.orderID}/${this.props.carID}/${this.props.price}`, {headers:{\"authorization\":localStorage.token, \"Content-type\": \"multipart/form-data\"}})\r\n            .then(res =>\r\n            {\r\n                this.setState({payPalMessageType:PaymentMessage.messageType.SUCCESS,\r\n                    payPalOrderID:paymentData.orderID,\r\n                    redirectToPayPalMessage:true})\r\n            })\r\n            .catch(errorData =>\r\n            {\r\n                this.setState({payPalMessageType:PaymentMessage.messageType.ERROR,\r\n                    redirectToPayPalMessage:true})\r\n            })\r\n    }\r\n\r\n\r\n    onError = errorData =>\r\n    {\r\n        this.setState({payPalMessageType:PaymentMessage.messageType.ERROR,\r\n            redirectToPayPalMessage:true})\r\n    }\r\n\r\n\r\n    onCancel = cancelData =>\r\n    {\r\n        // The user pressed the Paypal checkout popup window cancel button or closed the Paypal checkout popup window\r\n        this.setState({payPalMessageType:PaymentMessage.messageType.CANCEL,\r\n            redirectToPayPalMessage:true})\r\n    }\r\n\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div>\r\n                {this.state.redirectToPayPalMessage ? <Redirect to= {`/PayPalMessage/${this.state.payPalMessageType}/${this.state.payPalOrderID}`}/> : null}\r\n\r\n                <PayPalScriptProvider options={{currency:\"EUR\", \"client-id\":SANDBOX_CLIENT_ID }}>\r\n                    <PayPalButtons style={{layout: \"horizontal\"}} createOrder={this.createOrder} onApprove={this.onApprove} onError={this.onError} onCancel={this.onCancel}/>\r\n                </PayPalScriptProvider>\r\n            </div>\r\n        )}\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}