{"ast":null,"code":"import React,{Component}from\"react\";import{Redirect,Link}from\"react-router-dom\";import Logo from\"../Images/logo.png\";import AccountIcon from\"../Images/AccountIcon.png\";import BagIcon from\"../Images/BagIcon.png\";import SearchIcon from\"../Images/SearchIcon.png\";import{SERVER_HOST,ACCESS_LEVEL_GUEST}from\"../config/global_constants\";import SearchDropdown from\"./SearchDropdown\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class NavBar extends Component{constructor(props){super(props);this.handleSearchChange=e=>{this.setState({searchInput:e.target.value});if(this.state.searchInput.length>0){this.handleProductSearch();}else{this.setState({searchResults:[]});}};this.handleProductSearch=()=>{let matchingProducts=this.state.products.filter(product=>product.name.toLowerCase().includes(this.state.searchInput.toLowerCase())||product.brand.toLowerCase().includes(this.state.searchInput.toLowerCase()));matchingProducts.sort((a,b)=>a.name<b.name?-1:1);this.setState({searchResults:matchingProducts});console.log(\"Found Products: \",matchingProducts);};this.state={products:[],searchResults:[],searchInput:\"\",userIsLoggedIn:localStorage.accessLevel>ACCESS_LEVEL_GUEST};}componentDidMount(){// Fetch products in the parent component\naxios.get(\"\".concat(SERVER_HOST,\"/products\")).then(res=>{//console.log(\"Records read to NavBar\");\nthis.setState({products:res.data});}).catch(err=>{});}render(){//console.log(\"Search results in NavBar: \",this.state.searchResults)\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"nav-container\",children:/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"search\",placeholder:\"Search for names and brands\",onChange:this.handleSearchChange}),this.state.searchInput.length>0?/*#__PURE__*/_jsx(SearchDropdown,{searchResults:this.state.searchResults}):null]}),/*#__PURE__*/_jsx(\"div\",{className:\"icons-container\",children:/*#__PURE__*/_jsx(\"i\",{className:\"searchIcon\",onClick:this.handleProductSearch,children:/*#__PURE__*/_jsx(\"img\",{src:SearchIcon})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"icons-container\",children:/*#__PURE__*/_jsx(\"i\",{className:\"logo-image\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"logo\"})})}),this.state.userIsLoggedIn?/*#__PURE__*/_jsx(\"div\",{className:\"icons-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/UserProfile/\".concat(localStorage.email),children:/*#__PURE__*/_jsx(\"i\",{className:\"account\",children:/*#__PURE__*/_jsx(\"img\",{src:AccountIcon,alt:\"Account Tab\"})})})}):/*#__PURE__*/_jsx(\"div\",{className:\"icons-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/AccountPage\",children:/*#__PURE__*/_jsx(\"i\",{className:\"account\",children:/*#__PURE__*/_jsx(\"img\",{src:AccountIcon,alt:\"Account Tab\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"icons-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/ShoppingCart\",children:/*#__PURE__*/_jsx(\"i\",{className:\"shopping-bag\",children:/*#__PURE__*/_jsx(\"img\",{src:BagIcon,alt:\"Shopping Cart\"})})})})]})})});}}","map":{"version":3,"names":["React","Component","Redirect","Link","Logo","AccountIcon","BagIcon","SearchIcon","SERVER_HOST","ACCESS_LEVEL_GUEST","SearchDropdown","axios","jsx","_jsx","jsxs","_jsxs","NavBar","constructor","props","handleSearchChange","e","setState","searchInput","target","value","state","length","handleProductSearch","searchResults","matchingProducts","products","filter","product","name","toLowerCase","includes","brand","sort","a","b","console","log","userIsLoggedIn","localStorage","accessLevel","componentDidMount","get","concat","then","res","data","catch","err","render","className","children","type","id","placeholder","onChange","onClick","src","alt","to","email"],"sources":["C:/Users/jamie/Desktop/CA2/NODEJS-ONLY/client/src/components/NavBar.js"],"sourcesContent":["import React, {Component} from \"react\"\r\nimport {Redirect, Link} from \"react-router-dom\"\r\nimport Logo from \"../Images/logo.png\"\r\nimport AccountIcon from \"../Images/AccountIcon.png\"\r\nimport BagIcon from \"../Images/BagIcon.png\"\r\nimport SearchIcon from \"../Images/SearchIcon.png\"\r\nimport {SERVER_HOST, ACCESS_LEVEL_GUEST} from \"../config/global_constants\";\r\nimport SearchDropdown from \"./SearchDropdown\";\r\nimport axios from \"axios\";\r\n\r\nexport default class NavBar extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            products: [],\r\n            searchResults: [],\r\n            searchInput: \"\",\r\n            userIsLoggedIn: localStorage.accessLevel > ACCESS_LEVEL_GUEST\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        // Fetch products in the parent component\r\n        axios.get(`${SERVER_HOST}/products`)\r\n            .then((res) => {\r\n\r\n                        //console.log(\"Records read to NavBar\");\r\n                        this.setState({\r\n                            products: res.data,\r\n                        });\r\n\r\n\r\n            })\r\n            .catch(err=>{\r\n\r\n            })\r\n    }\r\n\r\n    handleSearchChange = (e) => {\r\n        this.setState({searchInput: e.target.value})\r\n        if(this.state.searchInput.length > 0) {\r\n            this.handleProductSearch()\r\n        } else {\r\n            this.setState({searchResults: []})\r\n        }\r\n    }\r\n\r\n    handleProductSearch = () => {\r\n        let matchingProducts = this.state.products.filter((product) =>\r\n            (product.name.toLowerCase().includes(this.state.searchInput.toLowerCase()) ||\r\n            product.brand.toLowerCase().includes(this.state.searchInput.toLowerCase()))\r\n        )\r\n\r\n        matchingProducts.sort((a, b) => a.name < b.name?-1:1)\r\n        this.setState({searchResults: matchingProducts})\r\n        console.log(\"Found Products: \",matchingProducts)\r\n    }\r\n\r\n    render() {\r\n        //console.log(\"Search results in NavBar: \",this.state.searchResults)\r\n        return (\r\n            <div className=\"nav-container\">\r\n                <nav>\r\n                    <div className={\"container\"}>\r\n                        <div className={\"search-container\"}>\r\n                            <div className=\"search-bar\">\r\n                                <input        \r\n                                    type=\"text\"\r\n                                    id=\"search\"\r\n                                    placeholder=\"Search for names and brands\"\r\n                                    onChange={this.handleSearchChange}\r\n                                />\r\n                                {this.state.searchInput.length > 0 ?\r\n                                    <SearchDropdown\r\n                                        searchResults={this.state.searchResults}\r\n                                    />\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                            <div className={\"icons-container\"}>\r\n                                <i className={\"searchIcon\"} onClick={this.handleProductSearch}>\r\n                                    <img src={SearchIcon}/>\r\n                                </i>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className={\"icons-container\"}>\r\n                            <i className={\"logo-image\"}>\r\n                                <img src={Logo} alt=\"logo\"/>\r\n                            </i>\r\n                        </div>\r\n\r\n                        {this.state.userIsLoggedIn ? <div className={\"icons-container\"}>\r\n                            <Link to={`/UserProfile/${localStorage.email}`}>\r\n                                <i className={\"account\"}>\r\n                                    <img src={AccountIcon} alt=\"Account Tab\"/>\r\n                                </i>\r\n                            </Link>\r\n                        </div> : <div className={\"icons-container\"}>\r\n                            <Link to={\"/AccountPage\"}>\r\n                                <i className={\"account\"}>\r\n                                    <img src={AccountIcon} alt=\"Account Tab\"/>\r\n                                </i>\r\n                            </Link>\r\n                        </div>}\r\n                        <div className={\"icons-container\"}>\r\n                            <Link to={\"/ShoppingCart\"}>\r\n                                <i className={\"shopping-bag\"}>\r\n                                    <img src={BagIcon} alt=\"Shopping Cart\"/>\r\n                                </i>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </nav>\r\n            </div>\r\n        )\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}