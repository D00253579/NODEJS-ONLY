{"ast":null,"code":"import React,{Component}from\"react\";import NavBar from\"../NavBar\";import axios from\"axios\";import{SERVER_HOST}from\"../../config/global_constants\";import{Redirect}from\"react-router-dom\";import DeleteUsers from\"./DeleteUsers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class AdminProfileView extends Component{constructor(props){super(props);// TODO change to the redirect to maybe the main page??\nthis.handleReturn=()=>{this.setState({redirectToDashboard:true});};this.handleDelete=()=>{this.setState({redirectToDeleteUser:true});};this.state={user:{},redirectToDashboard:false,hasAddress:false,redirectToDeleteUser:false};}componentDidMount(){const id=this.props.match.params.id;// get user id passed from redirect parameters\naxios.get(\"\".concat(SERVER_HOST,\"/users/\").concat(id),{headers:{\"authorization\":localStorage.token}}).then(res=>{console.log(\"User found, displaying profile\");this.setState({user:res.data});if(!res.data.address.address_line_1){// check if the user has an address saved already\nthis.setState({hasAddress:false});// change states to show saved address or ability to add a new one\n}else{this.setState({hasAddress:true});}}).catch(err=>{});}render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-view\",children:[this.state.redirectToDashboard?/*#__PURE__*/_jsx(Redirect,{to:\"/AdminDashboard/ViewUsers/\"}):null,this.state.redirectToDeleteUser?/*#__PURE__*/_jsx(Redirect,{to:\"/AdminDashboard/DeleteUsers/\".concat(this.state.user._id)}):null,/*#__PURE__*/_jsx(\"div\",{className:\"admin-head-container\",children:/*#__PURE__*/_jsx(NavBar,{})}),/*#__PURE__*/_jsx(\"h1\",{children:\"User Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-photo\",children:localStorage.profilePhoto!==\"null\"?/*#__PURE__*/_jsx(\"img\",{id:\"profilePhoto\",src:\"data:;base64,\".concat(this.state.user.profilePhoto),alt:\"Your profile picture\"}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[this.state.user.email!==localStorage.email?/*#__PURE__*/_jsx(\"h3\",{children:\"Details\"}):/*#__PURE__*/_jsx(\"h3\",{children:\"Your Details\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Name: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.name})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Email: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.email})]})]}),this.state.hasAddress?/*#__PURE__*/ // if there is an address saved\n_jsxs(\"div\",{className:\"right\",children:[this.state.user.email!==localStorage.email?/*#__PURE__*/_jsx(\"h3\",{children:\"Address\"}):/*#__PURE__*/_jsx(\"h3\",{children:\"Your Address\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Line 1: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.address_line_1})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Line 2: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.address_line_2})]}),this.state.user.address.address_line_3?/*#__PURE__*/_jsxs(\"h4\",{children:[\"Line 3: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.address_line_3})]}):null,/*#__PURE__*/_jsxs(\"h4\",{children:[\"City: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.city})]}),this.state.user.address.county?/*#__PURE__*/_jsxs(\"h4\",{children:[\"County: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.county})]}):null,/*#__PURE__*/_jsxs(\"h4\",{children:[\"Country: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.country})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Post Code: \",/*#__PURE__*/_jsx(\"span\",{children:this.state.user.address.post_code})]}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/ // if there is no address saved\n_jsx(\"div\",{className:\"right\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[this.state.user.name,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"lighter-text\",children:\"has no saved address\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-history\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Purchase History\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleReturn,children:\"Return\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleDelete,children:\"Delete\"})]})})]});}}","map":{"version":3,"names":["React","Component","NavBar","axios","SERVER_HOST","Redirect","DeleteUsers","jsx","_jsx","jsxs","_jsxs","AdminProfileView","constructor","props","handleReturn","setState","redirectToDashboard","handleDelete","redirectToDeleteUser","state","user","hasAddress","componentDidMount","id","match","params","get","concat","headers","localStorage","token","then","res","console","log","data","address","address_line_1","catch","err","render","className","children","to","_id","profilePhoto","src","alt","email","name","address_line_2","address_line_3","city","county","country","post_code","onClick"],"sources":["C:/Users/jamie/Desktop/CA2/NODEJS-ONLY/client/src/components/AdminDashboard/AdminProfileView.js"],"sourcesContent":["import React, {Component} from \"react\"\r\nimport NavBar from \"../NavBar\";\r\nimport axios from \"axios\";\r\nimport {SERVER_HOST} from \"../../config/global_constants\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport DeleteUsers from \"./DeleteUsers\";\r\n\r\nexport default class AdminProfileView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: {},\r\n            redirectToDashboard: false,\r\n            hasAddress: false,\r\n            redirectToDeleteUser:false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const id = this.props.match.params.id // get user id passed from redirect parameters\r\n\r\n        axios.get(`${SERVER_HOST}/users/${id}`, {headers: {\"authorization\": localStorage.token}})\r\n            .then(res => {\r\n                        console.log(\"User found, displaying profile\")\r\n                        this.setState({user: res.data})\r\n\r\n                        if(!res.data.address.address_line_1) { // check if the user has an address saved already\r\n                            this.setState({hasAddress: false}) // change states to show saved address or ability to add a new one\r\n                        } else {\r\n                            this.setState({hasAddress: true})\r\n                        }\r\n            })\r\n            .catch(err=>{\r\n\r\n            })\r\n    }\r\n\r\n    // TODO change to the redirect to maybe the main page??\r\n    handleReturn = () => {\r\n        this.setState({redirectToDashboard: true})\r\n    }\r\nhandleDelete=()=>{\r\n        this.setState({redirectToDeleteUser:true})\r\n}\r\n\r\nrender() {\r\n        return (\r\n            <div className=\"profile-view\">\r\n                {this.state.redirectToDashboard ? <Redirect to={\"/AdminDashboard/ViewUsers/\"}/> : null}\r\n                {this.state.redirectToDeleteUser ?<Redirect to={`/AdminDashboard/DeleteUsers/${this.state.user._id}`}/> : null}\r\n                <div className=\"admin-head-container\">\r\n                    <NavBar/>\r\n                </div>\r\n\r\n                <h1>User Profile</h1>\r\n\r\n                <div className=\"user-profile\">\r\n\r\n                    <div className=\"profile-container\">\r\n                        <div className=\"profile-photo\">\r\n                            {localStorage.profilePhoto !== \"null\" ?\r\n                                <img id=\"profilePhoto\" src={`data:;base64,${this.state.user.profilePhoto}`}\r\n                                     alt=\"Your profile picture\"/> : null}\r\n                        </div>\r\n\r\n                        <div className=\"profile-details\">\r\n                            <div className=\"left\">\r\n                                {this.state.user.email !== localStorage.email ? <h3>Details</h3> : <h3>Your Details</h3>}\r\n                                <h4>Name: <span>{this.state.user.name}</span></h4>\r\n                                <h4>Email: <span>{this.state.user.email}</span></h4>\r\n\r\n                            </div>\r\n\r\n\r\n                            {this.state.hasAddress ?\r\n                                // if there is an address saved\r\n                                <div className=\"right\">\r\n                                    {this.state.user.email !== localStorage.email ? <h3>Address</h3> : <h3>Your Address</h3>}\r\n                                    <h4>Line 1: <span>{this.state.user.address.address_line_1}</span></h4>\r\n                                    <h4>Line 2: <span>{this.state.user.address.address_line_2}</span></h4>\r\n                                    {this.state.user.address.address_line_3 ? <h4>Line 3: <span>{this.state.user.address.address_line_3}</span></h4> : null}\r\n                                    <h4>City: <span>{this.state.user.address.city}</span></h4>\r\n                                    {this.state.user.address.county ? <h4>County: <span>{this.state.user.address.county}</span></h4> : null}\r\n                                    <h4>Country: <span>{this.state.user.address.country}</span></h4>\r\n                                    <h4>Post Code: <span>{this.state.user.address.post_code}</span></h4>\r\n                                    <br/>\r\n\r\n                                </div>\r\n\r\n                                :\r\n                                // if there is no address saved\r\n                                <div className=\"right\">\r\n                                    <h3>{this.state.user.name} <span className=\"lighter-text\">has no saved address</span></h3>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n\r\n                        <div className=\"profile-history\">\r\n                            <h2>Purchase History</h2>\r\n                            {/*TODO Display a table with minimum information about users 5 most recent purchases*/}\r\n\r\n\r\n                        </div>\r\n                        <button onClick={this.handleReturn}>Return</button>\r\n                        <button onClick={this.handleDelete}>Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}